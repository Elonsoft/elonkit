import { Meta, Story, ArgsTable } from '@storybook/addon-docs/blocks';
import { Canvas } from '~storybook/components';

import { action } from '@storybook/addon-actions';

import { ESFileListComponent } from '..';

import {
  FileListStoryBasicComponent,
  FileListStoryBasicModule,
  FILE_LIST_STORY_BASIC_SOURCE
} from './file-list-story-basic';

import {
  FileListStoryCustomIconComponent,
  FileListStoryCustomIconModule,
  FILE_LIST_STORY_CUSTOM_ICON_SOURCE
} from './file-list-story-custom-icon';

import {
  FileListStoryTypographyComponent,
  FileListStoryTypographyModule,
  FILE_LIST_STORY_TYPOGRAPHY_SOURCE
} from './file-list-story-typography';

<Meta
  title='UI/File List'
  args={{ imageTypes: 'image/png,image/jpg,image/jpeg' }}
  argTypes={{
    canRemove: { control: 'boolean' },
    canDownload: { control: 'boolean' },
    hideImages: { control: 'boolean' }
  }}
/>

# File List

This component displays a list of files.

## Demos

<Canvas source={FILE_LIST_STORY_BASIC_SOURCE}>
  <Story name='Basic' height='290px'>
    {((args, context) => ({
      component: FileListStoryBasicComponent,
      moduleMetadata: {
        imports: [FileListStoryBasicModule]
      },
      props: {
        ...args,
        onRemove: action('onRemove'),
        onDownload: action('onDownload')
      }
    })).bind({})}
  </Story>
</Canvas>

We can use custom icon for files.

<Canvas source={FILE_LIST_STORY_CUSTOM_ICON_SOURCE}>
  <Story name='Custom Icon' height='290px'>
    {((args, context) => ({
      component: FileListStoryCustomIconComponent,
      moduleMetadata: {
        imports: [FileListStoryCustomIconModule]
      },
      props: {
        ...args
      }
    })).bind({})}
  </Story>
</Canvas>

We can use typography inputs in order to change text presentation.

<Canvas source={FILE_LIST_STORY_TYPOGRAPHY_SOURCE}>
  <Story name='Typography' height='290px'>
    {((args, context) => ({
      component: FileListStoryTypographyComponent,
      moduleMetadata: {
        imports: [FileListStoryTypographyModule]
      },
      props: {
        ...args
      }
    })).bind({})}
  </Story>
</Canvas>

## API

<ArgsTable of={ESFileListComponent} />

## Interfaces

```ts
interface ESFileListFile {
  id?: number;
  deleted?: boolean;
  type?: string;
  base64?: string;
  file?: string;
  updatedAt?: string;
  name: string;
  size: number;
  content: File | string;
}
```

```ts
interface ESFileListRemoveAction {
  file: IESFileListFile;
  index: number;
}
```

Image types string should contain types separated by a comma, e.g. `image/png,image/jpg,image/jpeg`

```ts
interface ESFileListDefaultOptions {
  imageTypes?: string;
  hideImages?: boolean;
  canRemove?: boolean;
  canDownload?: boolean;
  fileNameTypography?: string;
  fileSizeTypography?: string;
}
```

## Constants

Injection token that can be used to configure the default options for all components within an app.

```ts
import { ES_FILE_LIST_DEFAULT_OPTIONS } from '@elonsoft/elonkit/ui/file-list';
@NgModule({
  providers: [
    {
      provide: ES_FILE_LIST_DEFAULT_OPTIONS,
      useValue: {
        imageTypes: 'image/png',
        hideImages: true
      }
    }
  ]
})
```
