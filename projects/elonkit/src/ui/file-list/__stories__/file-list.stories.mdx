import { Meta, Story, Props } from '@storybook/addon-docs/blocks';
import { Preview } from '~storybook/components';

import { withA11y } from '@storybook/addon-a11y';
import { action } from '@storybook/addon-actions';
import { withKnobs, boolean, text } from '@storybook/addon-knobs';

import { BrowserAnimationsModule } from '@angular/platform-browser/animations';

import { ESFileListComponent } from '..';

import {
  FileListStoryBasicComponent,
  FileListStoryBasicModule,
  FILE_LIST_STORY_BASIC_SOURCE
} from './file-list-story-basic';

import {
  FileListStoryLocaleComponent,
  FileListStoryLocaleModule,
  FILE_LIST_STORY_LOCALE_SOURCE
} from './file-list-story-locale';

<Meta title='UI/File List' decorators={[withA11y, withKnobs]} />

# File List

This component displays a list of files. Requires `file` and `file_download` svg icons to display
an icon next to file name.

## Demos

<Preview source={FILE_LIST_STORY_BASIC_SOURCE}>
  <Story name='Basic' height='270px'>
    {{
      component: FileListStoryBasicComponent,
      moduleMetadata: {
        imports: [BrowserAnimationsModule, FileListStoryBasicModule]
      },
      props: {
        canRemove: boolean('canRemove', false),
        canDownload: boolean('canDownload', false),
        hideImages: boolean('hideImages', false),
        imageTypes: text('imageTypes', 'image/png,image/jpg,image/jpeg'),
        onRemove: action('onRemove'),
        onDownload: action('onDownload')
      }
    }}
  </Story>
</Preview>

We can override default locale which is used for file size units.

<Preview source={FILE_LIST_STORY_LOCALE_SOURCE}>
  <Story name='Locale' height='270px'>
    {{
      component: FileListStoryLocaleComponent,
      moduleMetadata: {
        imports: [BrowserAnimationsModule, FileListStoryLocaleModule]
      }
    }}
  </Story>
</Preview>

## API

<Props of={ESFileListComponent} />

## Interfaces

```ts
interface ESFileListFile {
  id?: number;
  deleted?: boolean;
  type?: string;
  base64?: string;
  file?: string;
  name: string;
  size: number;
  content: File | string;
}
```

```ts
interface ESFileListRemoveAction {
  file: IESFileListFile;
  index: number;
}
```

Image types string should contain types separated by a comma, e.g. `image/png,image/jpg,image/jpeg`

```ts
interface ESFileListOptions {
  imageTypes?: string;
  hideImages?: boolean;
  canRemove?: boolean;
  canDownload?: boolean;
}
```

## Constants

Injection token that can be used to configure the default options for all components within an app.

```ts
import { ES_FILE_LIST_DEFAULT_OPTIONS } from '@elonsoft/elonkit/ui/file-list';
@NgModule({
  providers: [
    {
      provide: ES_FILE_LIST_DEFAULT_OPTIONS,
      useValue: {
        imageTypes: 'image/png',
        hideImages: true
      }
    }
  ]
})
```
