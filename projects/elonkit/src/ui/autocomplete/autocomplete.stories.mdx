import { Meta, Story, Props } from '@storybook/addon-docs/blocks';
import { Preview } from '~storybook/components';

import { withKnobs, text, number, boolean } from '@storybook/addon-knobs';
import { action } from '@storybook/addon-actions';
import { withA11y } from '@storybook/addon-a11y';

import { BrowserAnimationsModule } from '@angular/platform-browser/animations';

import { AutocompleteComponent } from './autocomplete.component';

import { AutocompleteStoryDefaultModule } from './__stories__/autocomplete-story-default/autocomplete-story-default.module';
import { AutocompleteStoryDefaultComponent } from './__stories__/autocomplete-story-default/autocomplete-story-default.component';
import { AUTOCOMPLETE_STORY_DEFAULT_SOURCE } from './__stories__/autocomplete-story-default/autocomplete-story-default.source';

import { AutocompleteStoryServiceModule } from './__stories__/autocomplete-story-service/autocomplete-story-service.module';
import { AutocompleteStoryServiceComponent } from './__stories__/autocomplete-story-service/autocomplete-story-service.component';
import { AUTOCOMPLETE_STORY_SERVICE_SOURCE } from './__stories__/autocomplete-story-service/autocomplete-story-service.source';

import { AutocompleteStoryCustomModule } from './__stories__/autocomplete-story-custom/autocomplete-story-custom.module';
import { AutocompleteStoryCustomComponent } from './__stories__/autocomplete-story-custom/autocomplete-story-custom.component';
import { AUTOCOMPLETE_STORY_CUSTOM_SOURCE } from './__stories__/autocomplete-story-custom/autocomplete-story-custom.source';

import { AutocompleteStoryNgModelModule } from './__stories__/autocomplete-story-ng-model/autocomplete-story-ng-model.module';
import { AutocompleteStoryNgModelComponent } from './__stories__/autocomplete-story-ng-model/autocomplete-story-ng-model.component';
import { AUTOCOMPLETE_STORY_NG_MODEL_SOURCE } from './__stories__/autocomplete-story-ng-model/autocomplete-story-ng-model.source';

<Meta title='UI/Autocomplete' decorators={[withA11y, withKnobs]} />

# Autocomplete

This component demonstrates usage of autocomplete.

## Demos

This is a basic story:

<Preview source={AUTOCOMPLETE_STORY_DEFAULT_SOURCE}>
  <Story name='Default' height='210px'>
    {{
      component: AutocompleteStoryDefaultComponent,
      moduleMetadata: {
        imports: [BrowserAnimationsModule, AutocompleteStoryDefaultModule]
      },
      props: {
        debounceTime: number('debounceTime', 500),
        freeInput: boolean('freeInput', false)
      }
    }}
  </Story>
</Preview>

This is a story with service:

<Preview source={AUTOCOMPLETE_STORY_SERVICE_SOURCE}>
  <Story name='Service' height='210px'>
    {{
      template: `<es-autocomplete-story-service></es-autocomplete-story-service>`,
      moduleMetadata: {
        imports: [BrowserAnimationsModule, AutocompleteStoryServiceModule]
      }
    }}
  </Story>
</Preview>

This is a story with custom options:

<Preview source={AUTOCOMPLETE_STORY_CUSTOM_SOURCE}>
  <Story name='Custom options' height='210px'>
    {{
      template: `<es-autocomplete-story-custom></es-autocomplete-story-custom>`,
      moduleMetadata: {
        imports: [BrowserAnimationsModule, AutocompleteStoryCustomModule]
      }
    }}
  </Story>
</Preview>

This is a story with ngModel:

<Preview source={AUTOCOMPLETE_STORY_NG_MODEL_SOURCE}>
  <Story name='ngModel' height='260px'>
    {{
      template: `<es-autocomplete-story-ng-model></es-autocomplete-story-ng-model>`,
      moduleMetadata: {
        imports: [BrowserAnimationsModule, AutocompleteStoryNgModelModule]
      }
    }}
  </Story>
</Preview>

## API

<Props of={AutocompleteComponent} />

## Constants

Injection token to be used to override the default options for es-autocomplete

```ts
import { ES_AUTOCOMPLETE_DEFAULT_OPTIONS } from '@elonsoft/elonkit/autocomplete';

@NgModule({
  providers: [
    {
      provide: ES_AUTOCOMPLETE_DEFAULT_OPTIONS,
      useValue: {
        debounceTime: 1000,
        freeInput: true
      }
    }
  ]
})
```
