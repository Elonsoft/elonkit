import { Meta, Story, ArgsTable } from '@storybook/addon-docs/blocks';
import { Canvas } from '~storybook/components';

import { action } from '@storybook/addon-actions';
import { text, select } from '@storybook/addon-knobs';

import { ESAlertModule, ESAlertComponent } from '..';

import { ALERT_STORY_BASIC_SOURCE } from './alert-story-basic';
import { ALERT_STORY_CLOSABLE_SOURCE } from './alert-story-closable';
import { ALERT_STORY_ACTIONS_SOURCE } from './alert-story-actions';
import {
  AlertStoryIconMappingModule,
  AlertStoryIconMappingComponent,
  ALERT_STORY_ICON_MAPPING_SOURCE
} from './alert-story-icon-mapping';
import {
  AlertStoryLocaleModule,
  AlertStoryLocaleComponent,
  ALERT_STORY_LOCALE_SOURCE
} from './alert-story-locale';

<Meta title='UI/Alert' component={ESAlertComponent} />

# Alert

An alert displays a short, important message in a way that attracts the user's attention without
interrupting the user's task.

## Demos

<Canvas source={ALERT_STORY_BASIC_SOURCE}>
  <Story name='Basic' height='100px'>
    {{
      template: `<es-alert [variant]="variant">{{content}}</es-alert>`,
      moduleMetadata: {
        imports: [ESAlertModule]
      },
      props: {
        content: text('content', 'Message'),
        variant: select('variant', ['default', 'info', 'success', 'warning', 'error'], 'info')
      }
    }}
  </Story>
</Canvas>

We can make alert closable.

<Canvas source={ALERT_STORY_CLOSABLE_SOURCE}>
  <Story name='Closable' height='100px'>
    {{
      template: `<es-alert [variant]="variant" closable (closed)="onClose()">{{content}}</es-alert>`,
      moduleMetadata: {
        imports: [ESAlertModule]
      },
      props: {
        content: text('content', 'Message'),
        variant: select('variant', ['default', 'info', 'success', 'warning', 'error'], 'error'),
        onClose: action('onClose')
      }
    }}
  </Story>
</Canvas>

We can add actions.

<Canvas source={ALERT_STORY_CLOSABLE_SOURCE}>
  <Story name='Actions' height='200px'>
    {{
      template: `
        <es-alert [variant]="variant">
          {{content}}
          <es-alert-actions>
            <button mat-flat-button (click)="onAction()">Action</button>
            <button mat-button (click)="onCancel()">Cancel</button>
          </es-alert-actions>
        </es-alert>
      `,
      moduleMetadata: {
        imports: [ESAlertModule]
      },
      props: {
        content: text('content', 'Message'),
        variant: select('variant', ['default', 'info', 'success', 'warning', 'error'], 'success'),
        onAction: action('onAction'),
        onCancel: action('onCancel')
      }
    }}
  </Story>
</Canvas>

We can override default icon mapping and individual icons.

<Canvas source={ALERT_STORY_ICON_MAPPING_SOURCE}>
  <Story name='Icon mapping' height='400px'>
    {{
      component: AlertStoryIconMappingComponent,
      moduleMetadata: {
        imports: [AlertStoryIconMappingModule]
      }
    }}
  </Story>
</Canvas>

We can override default locale which is used for close button.

<Canvas source={ALERT_STORY_LOCALE_SOURCE}>
  <Story name='Locale' height='200px'>
    {{
      component: AlertStoryLocaleComponent,
      moduleMetadata: {
        imports: [AlertStoryLocaleModule]
      }
    }}
  </Story>
</Canvas>

## API

<ArgsTable />

## Constants

Injection token that can be used to configure the default options for all components within an app.

```ts
import { ES_ALERT_DEFAULT_OPTIONS } from '@elonsoft/elonkit/ui/alert';

@NgModule({
  providers: [
    {
      provide: ES_ALERT_DEFAULT_OPTIONS,
      useValue: {
        typography: 'mat-body-1',
        iconMapping: {
          default: { icon: 'info' },
          info: { icon: 'info' },
          success: { icon: 'check_circle' },
          warning: { icon: 'warning' },
          error: { icon: 'error' }
        }
      }
    }
  ]
})
```
